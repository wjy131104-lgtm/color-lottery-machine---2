<!DOCTYPE html>
<html>
<head>
    <title>Square Breaker</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { border: 1px solid #333; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = 600;
        canvas.height = 600;

        let particles = [];
        let box = { x: 250, y: 250, size: 100, alive: true };

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 5 + 2;
                this.vx = (Math.random() - 0.5) * 10; // 좌우 확산 속도
                this.vy = (Math.random() - 0.5) * 10; // 상하 확산 속도
                this.gravity = 0.2; // 중력 효과
                this.alpha = 1; // 투명도 (점점 사라짐)
                this.color = color;
            }

            update() {
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= 0.01;
            }

            draw() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.size, this.size);
            }
        }

        function explode() {
            if (!box.alive) return;
            box.alive = false;

            // 사각형을 10x10 격자로 나눠서 파편 생성
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    particles.push(new Particle(
                        box.x + (i * 10), 
                        box.y + (j * 10), 
                        `#3498db`
                    ));
                }
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (box.alive) {
                ctx.fillStyle = '#3498db';
                ctx.fillRect(box.x, box.y, box.size, box.size);
                ctx.fillStyle = 'white';
                ctx.fillText('Click to Break', box.x + 15, box.y + 55);
            }

            particles.forEach((p, index) => {
                p.update();
                p.draw();
                if (p.alpha <= 0) particles.splice(index, 1); // 메모리 관리
            });

            requestAnimationFrame(animate);
        }

        canvas.addEventListener('mousedown', explode);
        animate();
    </script>
</body>
</html>